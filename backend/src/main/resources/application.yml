fitbit:
  api-base-uri: ${FITBIT_API_BASE_URI:https://api.fitbit.com}
  client-id: ${FITBIT_CLIENT_ID:}
  client-secret: ${FITBIT_CLIENT_SECRET:}
  redirect-uri: ${FITBIT_REDIRECT_URI:http://localhost:8080/oauth/fitbit/callback}
  authorize-uri: ${FITBIT_AUTHORIZE_URI:https://www.fitbit.com/oauth2/authorize}
  token-uri: ${FITBIT_TOKEN_URI:https://api.fitbit.com/oauth2/token}
  scope: ${FITBIT_SCOPE:activity heartrate profile sleep weight cardio_fitness}
spring:
  application:
    name: fitdata
  datasource:
    url: ${DB_URL:jdbc:postgresql://localhost:5480/fitbit}
    username: ${DB_USER:fitbit}
    password: ${DB_PASS:fitbit}
    hikari:
      maximum-pool-size: 20
      minimum-idle: 5
      idle-timeout: 300000
      connection-timeout: 20000
      max-lifetime: 1200000
  jpa:
    hibernate:
      ddl-auto: validate
  flyway:
    enabled: true
  profiles:
    active: ${SPRING_PROFILES_ACTIVE:dev}
  cache:
    type: caffeine
    cache-names: fitbit_profile,fitbit_steps,fitbit_heart_range,fitbit_heart_intraday,fitbit_heart_day,fitbit_activity_summary,fitbit_weight,fitbit_sleep,fitbit_vo2max
    caffeine:
      spec: expireAfterWrite=10m,maximumSize=500

server:
  port: ${PORT:8080}
  servlet:
    session:
      timeout: 30m
      cookie:
        name: JSESSIONID
        http-only: true
        secure: true
        same-site: none
        partitioned: true
  forward-headers-strategy: framework
  tomcat:
    threads:
      max: 200
      min-spare: 20
    connection-timeout: 60s
    max-connections: 10000
  threads:
    virtual:
      enabled: true
logging:
  level:
    root: INFO
    com.aarw.fitdata: DEBUG
    org.springframework.web: INFO
    org.springframework.security: INFO
    org.hibernate.SQL: INFO
    com.aarw.fitdata.fitbit.FitbitApiClient: DEBUG